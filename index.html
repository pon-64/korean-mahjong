<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>韓国麻雀 - Paradise City ルール</title>
  <link rel="stylesheet" href="style.css?v=12">
</head>
<body>

  <div id="board">
    <div id="table-surface">

      <!-- 北エリア（上辺）-->
      <div id="area-north">
        <div class="nameplate nameplate-top">
          <span class="seat-name">北（対面）</span>
          <span id="score-2" class="score-label">0pt</span>
          <span id="riichi-2" class="riichi-stick">リーチ</span>
        </div>
        <div class="north-hand-row">
          <div id="melds-2" class="meld-row"></div>
          <div id="cpu-hand-2" class="cpu-hand-row"></div>
        </div>
      </div>

      <!-- 中段 -->
      <div id="middle-row">

        <!-- 東エリア（左辺）-->
        <div id="area-east">
          <div class="nameplate nameplate-side">
            <span class="seat-name">東</span>
            <span id="score-3" class="score-label">0pt</span>
            <span id="riichi-3" class="riichi-stick">R</span>
          </div>
          <div class="side-hand-col">
            <div id="cpu-hand-3" class="cpu-hand-vert"></div>
            <div id="melds-3" class="meld-vert"></div>
          </div>
        </div>

        <!-- 中央テーブル（捨て牌 + 情報）-->
        <div id="table-center">
          <div id="discards-2" class="discard-area discard-north"></div>
          <div id="center-mid-row">
            <div id="discards-3" class="discard-area discard-east"></div>
            <div id="center-deco">
              <div id="dora-area">
                <div class="label-text">ドラ</div>
                <div id="dora-indicators"></div>
              </div>
              <div id="remaining">残り -- 枚</div>
              <div class="label-text">局 <span id="round-num">1</span></div>
            </div>
            <div id="discards-1" class="discard-area discard-west"></div>
          </div>
          <div id="discards-0" class="discard-area discard-south"></div>
        </div>

        <!-- 西エリア（右辺）-->
        <div id="area-west">
          <div class="side-hand-col">
            <div id="melds-1" class="meld-vert"></div>
            <div id="cpu-hand-1" class="cpu-hand-vert"></div>
          </div>
          <div class="nameplate nameplate-side">
            <span class="seat-name">西</span>
            <span id="score-1" class="score-label">0pt</span>
            <span id="riichi-1" class="riichi-stick">R</span>
          </div>
        </div>

      </div>

      <!-- 南エリア（下辺）-->
      <div id="area-south">
        <div class="south-hand-row">
          <div id="player-hand"></div>
          <div id="melds-0" class="meld-row"></div>
        </div>
        <div class="nameplate nameplate-bottom">
          <span class="seat-name">南（あなた）</span>
          <span id="score-0" class="score-label">0pt</span>
          <span id="riichi-0" class="riichi-stick">リーチ</span>
        </div>
      </div>

    </div><!-- /table-surface -->

    <!-- アクションボタン -->
    <div id="controls">
      <button class="action-btn" id="btn-tsumo"  disabled>ツモ</button>
      <button class="action-btn" id="btn-riichi" disabled>リーチ</button>
      <button class="action-btn" id="btn-ron"    disabled>ロン</button>
      <button class="action-btn" id="btn-pon"    disabled>ポン</button>
      <button class="action-btn" id="btn-kan"    disabled>カン</button>
      <button class="action-btn" id="btn-pass"   disabled>パス</button>
    </div>

  </div><!-- /board -->

  <!-- ゲームログ -->
  <div id="game-log"></div>

  <!-- 和了ダイアログ -->
  <div class="dialog-overlay" id="win-dialog">
    <div class="dialog">
      <h2 id="win-winner">和了！</h2>
      <p id="win-type"></p>
      <p id="win-score"></p>
      <div class="win-hand-row" id="win-hand"></div>
      <div style="font-size:12px;color:#aaa;margin-top:8px;">
        ドラ表示牌: <span id="win-doras" style="display:inline-flex;gap:2px;vertical-align:middle;"></span>
      </div>
      <div style="display:flex;gap:10px;justify-content:center;margin-top:16px;">
        <button class="dialog-btn" id="btn-review-win" style="background:#4a8a4a;color:#fff;">振り返り</button>
        <button class="dialog-btn" id="btn-next-round">次の局へ</button>
      </div>
    </div>
  </div>

  <!-- 流局ダイアログ -->
  <div class="dialog-overlay" id="draw-dialog">
    <div class="dialog">
      <h2>流局</h2>
      <p>誰も和了できませんでした</p>
      <div style="display:flex;gap:10px;justify-content:center;margin-top:16px;">
        <button class="dialog-btn" id="btn-review-draw" style="background:#4a8a4a;color:#fff;">振り返り</button>
        <button class="dialog-btn" id="btn-next-round-draw">次の局へ</button>
      </div>
    </div>
  </div>

  <!-- 局振り返りオーバーレイ -->
  <div id="review-overlay">
    <div id="review-inner">
      <h2>局振り返り</h2>
      <div id="review-content"></div>
      <button id="review-close-btn">閉じる</button>
    </div>
  </div>

  <!-- スタート画面 -->
  <div class="dialog-overlay" id="start-screen" style="display:flex;">
    <div class="dialog" style="max-width:360px;">
      <h2 style="font-size:28px;">韓国麻雀</h2>
      <p style="margin:8px 0 4px;color:#c8a050;font-size:13px;">Paradise City ルール v8.9</p>
      <p style="color:#aaa;font-size:12px;margin-bottom:16px;">あなた（南）vs CPU 3人（東・西・北）</p>
      <div style="font-size:12px;color:#bbb;text-align:left;margin-bottom:20px;line-height:1.9;">
        <div>・牌をクリックして打牌</div>
        <div>・ロン/ツモ/リーチ/ポンはボタンで操作</div>
        <div>・フリテン制限なし（韓麻ルール）</div>
        <div>・チーなし / 封頂20点</div>
      </div>
      <button class="dialog-btn" id="btn-start" style="font-size:20px;padding:14px 48px;">ゲーム開始</button>
    </div>
  </div>

  <script type="module" src="js/main.js?v=7"></script>
</body>
</html>
